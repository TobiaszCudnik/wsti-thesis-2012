#!/usr/bin/env sh
ROOT=`dirname $0`/..

build='contracts'
BUILD=${1:-$build}   # Defaults to /tmp dir.

cd $ROOT/build/$BUILD

~/node_modules/.bin/runjs \
	--harmony_proxies \
	--harmony-collections \
	$ROOT/node_modules/.bin/mocha \
	$ROOT/test/node_modules/semaphores/test/semaphore.js \
	$ROOT/../../node_modules/jsprops/properties_test.js \
	$ROOT/test/server.js \
	$ROOT/test/client.js \
	$ROOT/test/node.js \
	$ROOT/test/prototypes/dnode-signals.js \
	$ROOT/test/prototypes/rpc-image-exchange.js \
	-r should \
	-R spec
	
# TODO add asyncemitter tests

#	$ROOT/../test/*.coffee \
#	$ROOT/../test/**/*.coffee \
#$ROOT/../node_modules/.bin/mocha $ROOT/../test/graph.coffee -r should -R spec -w
